<VirtualHost *:80>
  ServerName localhost
  UseCanonicalName Off
  VirtualDocumentRoot "/var/www/html/%-2+"

  <Directory "/var/www/html">
    AllowOverride All
    Require all granted
    DirectoryIndex index.php index.html
  </Directory>

  RewriteEngine On
  RewriteCond %{HTTP_HOST} !^[a-z0-9-]+\.loc$ [NC]
  RewriteRule ^ - [R=404,L]

  <FilesMatch \.php$>
    SetHandler "proxy:fcgi://php:9000"
  </FilesMatch>
</VirtualHost>

<VirtualHost *:443>
  ServerName localhost
  UseCanonicalName Off
  VirtualDocumentRoot "/var/www/html/%-2+"

  SSLEngine on
  SSLCertificateFile "/usr/local/apache2/conf/certs/devbox.loc.pem"
  SSLCertificateKeyFile "/usr/local/apache2/conf/certs/devbox.loc-key.pem"

  <Directory "/var/www/html">
    AllowOverride All
    Require all granted
    DirectoryIndex index.php index.html
  </Directory>

  RewriteEngine On
  RewriteCond %{HTTP_HOST} !^[a-z0-9-]+\.loc$ [NC]
  RewriteRule ^ - [R=404,L]

  <FilesMatch \.php$>
    SetHandler "proxy:fcgi://php:9000"
  </FilesMatch>
</VirtualHost>
